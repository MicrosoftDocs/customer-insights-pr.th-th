---
title: การรีเฟรชแบบเพิ่มหน่วยสำหรับแหล่งข้อมูล Power Query และ Azure Data Lake
description: รีเฟรชข้อมูลใหม่และที่ปรับปรุงสำหรับแหล่งข้อมูลขนาดใหญ่ที่อยู่บนแหล่งข้อมูล Power Query หรือ Azure Data Lake
ms.date: 05/30/2022
ms.reviewer: v-wendysmith
ms.subservice: audience-insights
ms.topic: how-to
author: mukeshpo
ms.author: mukeshpo
manager: shellyha
searchScope:
- ci-system-schedule
- customerInsights
ms.openlocfilehash: de39743eb8728fac34e417724c5f73bf44309c89
ms.sourcegitcommit: 5807b7d8c822925b727b099713a74ce2cb7897ba
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 07/28/2022
ms.locfileid: "9207160"
---
# <a name="incremental-refresh-for-power-query-and-azure-data-lake-data-sources"></a>การรีเฟรชแบบเพิ่มหน่วยสำหรับแหล่งข้อมูล Power Query และ Azure Data Lake

การรีเฟรชแบบเพิ่มหน่วยสำหรับแหล่งข้อมูลใน Power Query หรือ Azure Data Lake ให้ประโยชน์ดังต่อไปนี้:

- **การรีเฟรชที่เร็วขึ้น** - เฉพาะข้อมูลที่มีการเปลี่ยนแปลงเท่านั้นที่จะได้รับการรีเฟรช ตัวอย่างเช่น คุณอาจรีเฟรชเพียงห้าวันที่ผ่านมาของชุดข้อมูลในอดีต
- **ความน่าเชื่อถือที่เพิ่มขึ้น** - ด้วยการรีเฟรชที่น้อยลง คุณไม่จำเป็นต้องรักษาการเชื่อมต่อกับระบบต้นทางที่ไม่แน่นอนได้นานเท่านาน ซึ่งลดความเสี่ยงของปัญหาการเชื่อมต่อ
- **การใช้ทรัพยากรที่ลดลง** - การรีเฟรชเฉพาะชุดย่อยของข้อมูลทั้งหมดของคุณ นำไปสู่การใช้ทรัพยากรคอมพิวเตอร์ที่มีประสิทธิภาพมากขึ้นและลดผลกระทบต่อสิ่งแวดล้อม

## <a name="configure-incremental-refresh-for-data-sources-based-on-power-query"></a>กำหนดค่าการรีเฟรชแบบเพิ่มหน่วยสำหรับแหล่งข้อมูลที่อยู่บน Power Query

Customer Insights ช่วยให้มีการรีเฟรชแบบเพิ่มหน่วยสำหรับแหล่งข้อมูลที่นำเข้าผ่าน Power Query ที่รองรับการนำเข้าแบบเพิ่มหน่วย ตัวอย่างเช่น ฐานข้อมูล Azure SQL ที่มีฟิลด์วันที่และเวลา ซึ่งระบุว่าเมื่อใดที่มีการปรับปรุงเรกคอร์ดข้อมูลล่าสุด

1. [สร้างแหล่งข้อมูลใหม่บน Power Query](connect-power-query.md)

1. เลือกแหล่งข้อมูลที่รองรับการรีเฟรชส่วนเพิ่ม เช่น [ฐานข้อมูล Azure SQL](/power-query/connectors/azuresqldatabase)

1. เลือกเอนทิตีหรือตารางที่จะส่งเข้า

1. ทำขั้นตอนการแปลงให้เสร็จสมบูรณ์ และเลือก **ต่อไป**

1. ในกล่องโต้ตอบ **ตั้งค่าการรีเฟรชส่วนเพิ่ม** ให้เลือก **ติดตั้ง** เพื่อเปิด **การตั้งค่ารีเฟรชส่วนเพิ่ม** หากคุณเลือก **ข้าม** แหล่งข้อมูลจะรีเฟรชชุดข้อมูลทั้งหมด
   > [!TIP]
   > นอกจากนี้ คุณยังสามารถใช้การรีเฟรชส่วนเพิ่มในภายหลังได้โดยแก้ไขแหล่งข้อมูลที่มีอยู่

1. บน **การตั้งค่าการรีเฟรชส่วนเพิ่ม** คุณจะกำหนดค่าการรีเฟรชส่วนเพิ่มสำหรับเอนทิตีทั้งหมดที่คุณเลือก เมื่อสร้างแหล่งข้อมูล

   :::image type="content" source="media/incremental-refresh-settings.png" alt-text="กำหนดค่าการตั้งค่าการรีเฟรชแบบเพิ่มหน่วย":::

1. เลือกเอนทิตี และระบุรายละเอียดต่อไปนี้:

   - **กำหนดคีย์หลัก**: เลือกคีย์หลักสำหรับเอนทิตีหรือตาราง
   - **กำหนดฟิลด์ "ปรับปรุงล่าสุด"**: ฟิลด์นี้จะแสดงเฉพาะแอตทริบิวต์ของชนิดวันที่และเวลา เลือกแอตทริบิวต์ที่ระบุว่าเมื่อใดที่มีการปรับปรุงเรคคอร์ดครั้งล่าสุด จะใช้เพื่อระบุเรกคอร์ดที่อยู่ในกรอบเวลาการรีเฟรชแบบเพิ่มหน่วย
   - **ตรวจสอบการปรับปรุงทุกๆ**: ระบุระยะเวลาของกรอบเวลาการรีเฟรชส่วนเพิ่มที่คุณต้องการให้เป็น

1. เลือก **บันทึก** เพื่อดำเนินการสร้างแหล่งข้อมูลให้เสร็จสมบูรณ์ การรีเฟรชข้อมูลเริ่มต้นจะเป็นการรีเฟรชแบบเต็ม หลังจากนั้น การรีเฟรชข้อมูลส่วนเพิ่มจะเกิดขึ้นตามที่กำหนดค่าไว้ในขั้นตอนก่อนหน้า

## <a name="configure-incremental-refresh-for-azure-data-lake-data-sources"></a>กำหนดค่าการรีเฟรชแบบเพิ่มหน่วยสำหรับแหล่งข้อมูล Azure Data Lake

Customer Insights ช่วยในการรีเฟรชแบบเพิ่มหน่วยสำหรับแหล่งข้อมูลที่เชื่อมต่อกับ Azure Data Lake Storage ในการใช้การนำเข้าและการรีเฟรชแบบเพิ่มหน่วยสำหรับเอนทิตี ให้กำหนดค่าเอนทิตีนั้นเมื่อเพิ่มแหล่งข้อมูล Azure Data Lake หรือในภายหลังเมื่อแก้ไขแหล่งข้อมูล โฟลเดอร์ข้อมูลเอนทิตีต้องมีโฟลเดอร์ต่อไปนี้:

- **FullData**: โฟลเดอร์ที่มีไฟล์ข้อมูลที่มีเรกคอร์ดเริ่มต้น
- **IncrementalData**: โฟลเดอร์ที่มีโฟลเดอร์ลำดับชั้นวันที่/เวลาในรูปแบบ **yyyy/mm/dd/hh** ที่มีการปรับปรุงแบบเพิ่มหน่วย **hh** หมายถึงชั่วโมง UTC ของการปรับปรุงและมีโฟลเดอร์ **Upserts** และ **Deletes** **Upserts** มีไฟล์ข้อมูลที่มีการปรับปรุงเรกคอร์ดที่มีอยู่หรือเรกคอร์ดใหม่ **Deletes** มีไฟล์ข้อมูลที่มีเรกคอร์ดที่จะลบ

1. เมื่อเพิ่มหรือแก้ไขแหล่งข้อมูล ให้ไปที่บานหน้าต่าง **แอตทริบิวต์** สำหรับเอนทิตี

1. ตรวจสอบแอตทริบิวต์ ตรวจสอบให้แน่ใจว่าแอตทริบิวต์วันที่ที่สร้างหรือปรับปรุงล่าสุดตั้งค่าด้วย **รูปแบบข้อมูล** *dateTime* และ **ชนิดความหมาย** *Calendar.Date* แก้ไขแอตทริบิวต์ หากจำเป็น และเลือก **เสร็จ**

1. จากบานหน้าต่าง **เลือกเอนทิตี** ให้แก้ไขเอนทิตี มีการเลือกกล่องกาเครื่องหมาย **การนำเข้าแบบเพิ่มหน่วย**

   :::image type="content" source="media/ADLS_inc_refresh.png" alt-text="กำหนดค่าเอนทิตีในแหล่งข้อมูลสำหรับการรีเฟรชแบบเพิ่มหน่วย":::

   1. เรียกดูโฟลเดอร์รากที่มีไฟล์ .csv หรือ .parquet เพื่อดูข้อมูลทั้งหมด upserts ข้อมูลแบบเพิ่มหน่วย และการลบข้อมูลแบบเพิ่มหน่วย
   1. ป้อนนามสกุลสำหรับข้อมูลทั้งหมดและไฟล์แบบเพิ่มหน่วยทั้งคู่ (\.csv หรือ \.parquet)
   1. สำหรับไฟล์ .csv ให้เลือกตัวคั่นคอลัมน์ และถ้าคุณต้องการให้แถวแรกของไฟล์เป็นส่วนหัวของคอลัมน์
   1. เลือก **บันทึก**

1. สำหรับ **ปรับปรุงล่าสุด** ให้เลือกแอตทริบิวต์ประทับเวลาของวันที่

1. ถ้าไม่ได้เลือก **คีย์หลัก** ให้เลือกคีย์หลัก คีย์หลักคือแอตทริบิวต์ที่ไม่ซ้ำกับเอนทิตี เพื่อให้แอตทริบิวต์เป็นคีย์หลักที่ถูกต้อง ไม่ควรมีค่าที่ซ้ำกัน ค่าที่ขาดหายไป หรือค่า null แอตทริบิวต์ชนิดข้อมูลสตริง จำนวนเต็ม และ GUID ได้รับการสนับสนุนเป็นคีย์หลัก

1. เลือก **ปิด** เพื่อบันทึกและปิดบานหน้าต่าง

1. ดำเนินการต่อด้วยการเพิ่มหรือแก้ไขแหล่งข้อมูล

[!INCLUDE [footer-include](includes/footer-banner.md)]
