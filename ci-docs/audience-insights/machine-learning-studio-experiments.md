---
title: การทดลอง Machine Learning Studio (คลาสสิก)
description: ใช้โมเดลของ Machine Learning Studio (คลาสสิก) ใน Dynamics 365 Customer Insights
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 2eb44604e72b32292f971754d4f8c4fd1988c697
ms.sourcegitcommit: dab2cbf818fafc9436e685376df94c5e44e4b144
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 07/13/2021
ms.locfileid: "6555192"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a>ใช้โมเดลที่อิงตาม Azure Machine Learning Studio (คลาสสิก)

ข้อมูลที่รวมเข้าด้วยกันใน Dynamics 365 Customer Insights เป็นแหล่งที่มาสำหรับการสร้างโมเดลการเรียนรู้เกี่ยวกับเครื่องที่สามารถสร้างข้อมูลเชิงลึกทางธุรกิจเพิ่มเติม Customer Insights ผสานรวมกับ Machine Learning Studio (คลาสสิก) เพื่อใช้โมเดลที่คุณกำหนดเอง หากต้องการดูว่าโมเดลที่พัฒนาใน Azure Machine Learning รวมเข้ากับ Customer Insights ได้อย่างไร โปรดดู [การทดลอง Azure Machine Learning](azure-machine-learning-experiments.md)

## <a name="prerequisites"></a>ข้อกำหนดเบื้องต้น

- เข้าสู่ Customer Insights
- การสมัครใช้งาน Azure Enterprise ที่ใช้งานอยู่
- [โปรไฟล์ลูกค้าแบบรวม](data-unification.md)
- ติดตั้ง [เอนทิตีที่ส่งออกไปยังที่เก็บข้อมูล Azure Blob](export-azure-blob-storage.md)

## <a name="set-up-machine-learning-studio-classic"></a>ตั้งค่า Machine Learning Studio แบบคลาสสิก

ในขั้นแรก เราต้องสร้างพื้นที่ทำงานและเปิด Machine Learning Studio (คลาสสิก)

1. ไปยัง [https://www.portal.azure.com](https://www.portal.azure.com/) และลงชื่อเข้าใช้

1. เลือก **สร้างทรัพยากร**

1. ค้นหา **สร้างพื้นที่ทำงาน Machine Learning Studio** และเลือก **สร้าง**

1. ป้อนรายละเอียดที่จำเป็นเพื่อ [สร้างพื้นที่ทำงาน](/azure/machine-learning/studio/create-workspace) เลือก **ระดับราคาของแผนบริการเว็บ** ตามปริมาณข้อมูลที่คุณวางแผนจะนำเข้า เพื่อประสิทธิภาพที่ดีที่สุด ให้เลือก **ตำแหน่งที่ตั้ง** ที่อยู่ใกล้คุณที่สุดในทางภูมิศาสตร์

1. หลังจากสร้างทรัพยากรแล้วแดชบอร์ดพื้นที่ทำงาน Machine Learning Studio จะปรากฏขึ้น เลือก **เปิด Machine Learning Studio**

   ![ส่วนติดต่อผู้ใช้ Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a>ใช้งาน Azure Machine Learning Studio

ตอนนี้คุณสามารถสร้างการทดลองใหม่ หรือนำเข้าแม่แบบการทดสอบที่มีอยู่จากแกลเลอรีตัวอย่าง มีตัวอย่างการทดลองสำหรับสถานการณ์มาตรฐานสามสถานการณ์:

- [การคาดคะเนการเลิกใช้บริการ](#churn-analysis)

- [อายุการใช้งานของลูกค้า](#customer-lifetime-value-prediction)

- [คำแนะนำผลิตภัณฑ์ หรือการดำเนินการที่ดีที่สุดถัดไป](#productrecommendation-or-next-best-action)

1. หากคุณสร้างการทดสอบใหม่หรือใช้แม่แบบการทดสอบจากแกลเลอรี คุณต้องกำหนดค่าคุณสมบัติ **นำเข้าข้อมูล** ใช้ประสบการณ์ที่แนะนำหรือให้รายละเอียดโดยตรงเพื่อเข้าถึง Azure Blob Storage ที่มีข้อมูลของคุณ  

   ![การทดลองของ Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. ตอนนี้คุณสามารถสร้างไปป์ไลน์การประมวลผลแบบกำหนดเอง เพื่อทำความสะอาดและประมวลผลข้อมูลล่วงหน้า แยกคุณสมบัติ และฝึกโมเดลที่เหมาะสม

1. ทดสอบและปรับแต่งประสิทธิภาพของโมเดล

1. เมื่อคุณพอใจกับคุณภาพของโมเดลแล้วให้เลือก **ตั้งค่า Web Service** > **บริการเว็บทำนายผล** ตัวเลือกนี้จะนำเข้าโมเดลที่ได้รับการฝึก และไปป์ไลน์การสร้างคุณสมบัติจากการทดลองฝึกไปยังบริการคาดคะเน บริการคาดคะเนสามารถใช้ข้อมูลป้อนเข้าอีกชุด พร้อมกับสคีมาที่ใช้ในการทดสอบการฝึกเพื่อทำการคาดคะเน

   ![ตั้งค่าบริการเว็บทำนายผล](media/predictive-webservice-control.png)

1. เมื่อการทดสอบ บริการเว็บทำนายผล สำเร็จคุณสามารถปรับใช้สำหรับการตั้งเวลาอัตโนมัติได้ หากต้องการให้บริการเว็บทำงานกับ Customer Insights ให้เลือก **ปรับใช้ Web Service** > **ปรับใช้ Web Service [ใหม่] ดูตัวอย่าง** [เรียนรู้เพิ่มเติมเกี่ยวกับการปรับใช้ Web Service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service)

   ![ปรับใช้บริการเว็บทำนายผล](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a>โมเดลตัวอย่างจากแกลเลอรี

เราจะใช้สถานการณ์สมมติของโรงแรม Contoso สำหรับโมเดลในบทความนี้ โรงแรม Contoso รวบรวมข้อมูลดังต่อไปนี้:

- ข้อมูล CRM ประกอบด้วยกิจกรรมการเข้าพักในโรงแรม ชุดข้อมูลประกอบด้วยข้อมูลเกี่ยวกับวันที่เข้าพักสำหรับลูกค้าที่ลงทะเบียนแต่ละราย นอกจากนี้ยังมีข้อมูลเกี่ยวกับการจองประเภทห้องพักรายละเอียดการใช้จ่ายและอื่น ๆ ข้อมูลมีระยะเวลาสี่ปี ตั้งแต่มกราคม 2014 ถึงมกราคม 2018
- โปรไฟล์ลูกค้าของแขกของโรงแรม โปรไฟล์เหล่านี้มีข้อมูลเกี่ยวกับลูกค้าแต่ละราย ได้แก่ ชื่อ วันเกิด ที่อยู่ไปรษณีย์ เพศ และหมายเลขโทรศัพท์
- การใช้บริการที่โรงแรมมีให้ เช่น สปา บริการซักรีด WiFi หรือบริการจัดส่ง ข้อมูลนี้ถูกบันทึกไว้สำหรับลูกค้าที่ลงทะเบียนแต่ละราย โดยปกติการใช้บริการจะเชื่อมโยงกับการเข้าพัก ในบางกรณีลูกค้าสามารถใช้บริการได้โดยไม่ต้องเข้าพักในโรงแรม

## <a name="churn-analysis"></a>การวิเคราะห์การเลิกใช้บริการ

การวิเคราะห์การเลิกใช้บริการใช้กับพื้นที่ธุรกิจที่ต่างกัน ในตัวอย่างนี้เราจะดูการเลิกใช้บริการ โดยเฉพาะในบริบทของบริการของโรงแรมตามที่อธิบายไว้ข้างต้น เป็นตัวอย่างการทำงานของไปป์ไลน์โมเดลตั้งแต่ต้นทางถึงปลายทางที่สามารถใช้เป็นจุดเริ่มต้นสำหรับโมเดลการเลิกใช้บริการแบบอื่น ๆ

### <a name="definition-of-churn"></a>ความหมายของการเลิกใช้บริการ

คำจำกัดความของการเลิกใช้บริการอาจแตกต่างกันไปตามสถานการณ์ ในตัวอย่างนี้ ผู้เข้าพักที่ไม่ได้มาโรงแรมในปีที่ผ่านมาควรถูกระบุว่าเป็นผู้เลิกใช้บริการ  

แม่แบบการทดสอบสามารถนำเข้าจากแกลเลอรี ขั้นแรกตรวจสอบให้แน่ใจว่าคุณนำเข้าข้อมูลสำหรับ **กิจกรรมการเข้าพักโรงแรม** **ข้อมูลลูกค้า** และ **ข้อมูลการใช้บริการ** จากที่เก็บข้อมูล Azure Blob

   ![นำเข้าข้อมูลสำหรับโมเดลการเลิกใช้บริการ](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a>การทำให้เป็นคุณลักษณะ

ตามคำจำกัดความของการการเลิกใช้บริการ เราจะระบุคุณลักษณะดิบที่จะมีผลต่อป้ายชื่อก่อน จากนั้นเราประมวลผลคุณลักษณะดิบเหล่านี้ให้เป็นคุณลักษณะเชิงตัวเลขที่สามารถใช้ได้กับโมเดลการเรียนรู้เกี่ยวกับเครื่อง การรวมข้อมูลเกิดขึ้นใน Customer Insights เพื่อให้เราสามารถรวมตารางเหล่านี้ได้โดยใช้ *รหัสลูกค้า*

   ![รวมข้อมูลที่นำเข้า](media/join-imported-data.png)

การสร้างคุณลักษณะในการสร้างโมเดลสำหรับการวิเคราะห์การเลิกใช้บริการอาจเป็นเรื่องยุ่งยากเล็กน้อย ข้อมูลเป็นฟังก์ชันของเวลาที่มีการบันทึกกิจกรรมของโรงแรมใหม่ในแต่ละวัน ในระหว่างการทำให้เป็นคุณลักษณะเราต้องการสร้างคุณสมบัติคงที่จากข้อมูลไดนามิก ในกรณีนี้ เราสร้างคุณลักษณะหลายอย่างจากกิจกรรมของโรงแรมโดยมีช่วงเวลาหนึ่งปี นอกจากนี้เรายังขยายคุณสมบัติตามหมวดหมู่ เช่น ประเภทห้องหรือประเภทการจองเป็นคุณสมบัติแยกต่างหากโดยใช้การเข้ารหัสแบบ one-hot  

รายการคุณสมบัติสุดท้าย:

| **ตัวเลข**  | **original_column**          | **คุณสมบัติที่ได้รับ**                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| 1           | ประเภทห้อง                    | RoomTypeLargeCount, RoomTypeSmallCount                                                                                                    |
| 2           | ชนิดการจอง                 | BookingTypeOnlineCount, BookingTypePhoneCallCount                                                                                         |
| 3           | ประเภทการเดินทาง              | TravelCategoryBusinessCount, TravelCategoryLeisureCount                                                                                   |
| 4           | ดอลลาร์ที่ใช้ไป                | TotalDollarSpent                                                                                                                          |
| 5           | วันที่เช็คอินและเช็คเอาต์  | StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016. StayCount2015 StayCount2014                |
| 6           | การใช้บริการ                | UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage  |

### <a name="model-selection"></a>การเลือกโมเดล

ตอนนี้เราต้องเลือกอัลกอริทึมที่เหมาะสมที่สุดที่จะใช้ ในกรณีนี้ คุณลักษณะส่วนใหญ่จะขึ้นอยู่กับคุณลักษณะเฉพาะหมวดหมู่ โดยทั่วไปแล้วโมเดลที่เป็นแบบต้นไม้ตัดสินใจจะทำงานได้ดี หากมีเพียงคุณสมบัติที่เป็นตัวเลขโครงข่ายประสาทเทียมอาจเป็นทางเลือกที่ดีกว่า Support vector machine (SVM) ก็เป็นตัวเลือกที่ดีในสถานการณ์เช่นนี้ อย่างไรก็ตามต้องมีการปรับแต่งเล็กน้อยเพื่อให้ได้ประสิทธิภาพที่ดีที่สุด พวกเราเลือก **ต้นไม้การตัดสินใจที่เพิ่มขึ้นสองระดับ** เป็นตัวเลือกแรกตามด้วย **SVM สองชั้น** เป็นโมเดลที่สอง Azure Machine Learning Studio ช่วยคุณทำการทดสอบ A/B ได้ ดังนั้นจึงเป็นประโยชน์ที่จะเริ่มต้นด้วยสองรุ่นแทนที่จะเป็นแบบเดียว

ภาพต่อไปนี้แสดงไปป์ไลน์การฝึก และการประเมินโมเดลจาก Azure Machine Learning Studio:

![โมเดลการเลิกใช้บริการใน Azure Machine Learning Studio](media/azure-machine-learning-model.png)

เรายังใช้เทคนิคที่เรียกว่า **ความสำคัญของคุณสมบัติการเรียงลำดับ** ซึ่งเป็นสิ่งสำคัญของการเพิ่มประสิทธิภาพโมเดล โมเดลในตัวแทบไม่มีข้อมูลเชิงลึกเกี่ยวกับผลกระทบของคุณลักษณะเฉพาะใด ๆ ในการคาดคะเนขั้นสุดท้าย เครื่องคำนวณความสำคัญของคุณลักษณะใช้อัลกอริทึมที่กำหนดเองเพื่อคำนวณอิทธิพลของคุณลักษณะแต่ละอย่างที่มีต่อผลลัพธ์ของรูปแบบเฉพาะ ความสำคัญของคุณลักษณะถูกทำให้เป็นมาตรฐานระหว่าง +1 ถึง -1 อิทธิพลเชิงลบหมายถึงคุณลักษณะที่เกี่ยวข้องมีอิทธิพลในเชิงลบต่อผลลัพธ์และควรลบออกจากโมเดล อิทธิพลเชิงบวกบ่งชี้ว่าคุณลักษณะนี้มีส่วนอย่างมากต่อการคาดคะเน ค่าเหล่านี้ไม่ใช่ค่าสัมประสิทธิ์สหสัมพันธ์เนื่องจากเป็นเมตริกที่แตกต่างกัน สำหรับข้อมูลเพิ่มเติม โปรดดู [ความสำคัญของคุณสมบัติการเรียงลำดับ](/azure/machine-learning/studio-module-reference/permutation-feature-importance)

[การทดลองการเลิกใช้บริการมีอยู่ใน Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp) ทั้งหมด

## <a name="customer-lifetime-value-prediction"></a>การคาดคะเนอายุการใช้งานของลูกค้า

การคำนวณมูลค่าตลอดอายุการใช้งานของลูกค้า (CLTV) เป็นหนึ่งในเมตริกหลักที่ธุรกิจสามารถใช้ในการประเมินและแบ่งกลุ่มลูกค้าได้ สำหรับธุรกิจโรงแรมสิ่งสำคัญคือต้องรู้จักลูกค้าของตน ตัวอย่างเช่น การทำความเข้าใจปัจจัยที่ประกอบกันเป็นลูกค้าที่ดีคือข้อมูลที่สำคัญ ซึ่งจะช่วยให้ผู้บริหารโรงแรมประเมินว่าคุณลักษณะใดที่พวกเขาต้องให้ความสำคัญและปรับปรุง เพื่อตอบสนองลูกค้าที่จ่ายเงินสูง การตัดสินใจเหล่านี้อาจส่งผลโดยตรงต่อยอดขายและรายได้  

### <a name="definition-of-cltv"></a>ข้อกำหนดของ CLTV

สำหรับตัวอย่างนี้เรากำหนด CLTV ของลูกค้าเป็นจำนวนเงินดอลลาร์ทั้งหมดที่ลูกค้าคาดว่าจะใช้จ่ายใน 365 วันข้างหน้า เราจะใช้ข้อมูลในช่วงสามปีที่ผ่านมาสำหรับลูกค้าทั้งหมดในการคาดการณ์มูลค่านี้

### <a name="featurization"></a>การทำให้เป็นคุณลักษณะ

ในกรณีนี้การทำห้เป็นคุณลักษณะจะค่อนข้างเหมือนกับสถานการณ์การเลิกใช้บริการ อย่างไรก็ตาม ป้ายกำกับและค่าที่คาดการณ์จะแตกต่างจากที่กำหนดไว้ข้างต้น

### <a name="model-selection"></a>การเลือกโมเดล

การทำนาย CLTV เป็นปัญหาการถดถอย เนื่องจากค่าที่ทำนายเป็นตัวแปรต่อเนื่องที่มีมูลค่าเป็นบวก เราเลือกตามคุณสมบัติของคุณลักษณะ **การถดถอยของต้นไม้การตัดสินใจที่เพิ่มขึ้น** เป็นอัลกอริทึมเดียวและ **การถดถอยของเครือข่ายประสาท** เป็นอีกอัลกอริทึมในการฝึกโมเดล

## <a name="product-recommendation-or-next-best-action"></a>คำแนะนำผลิตภัณฑ์ หรือการดำเนินการที่ดีที่สุดถัดไป

การแนะนำผลิตภัณฑ์ในสถานการณ์ของโรงแรมถูกตีความว่าเป็นการแนะนำบริการที่โรงแรมเสนอให้กับลูกค้า โดยมีวัตถุประสงค์เพื่อเลือกบริการที่เหมาะสมสำหรับลูกค้าเพื่อให้การใช้งานของพวกเขาเกิดประโยชน์สูงสุด คล้ายกับคำแนะนำภาพยนตร์สำหรับผู้ใช้บริการสตรีมมิ่งวิดีโอ

### <a name="definition-of-product-recommendation-or-next-best-action"></a>ความหมายของคำแนะนำผลิตภัณฑ์ หรือการดำเนินการที่ดีที่สุดถัดไป

เรากำหนดเป้าหมายในการใช้เงินในการใช้บริการให้สูงที่สุด โดยเสนอบริการจับคู่ที่ดีที่สุดให้กับลูกค้าของโรงแรมตามความสนใจ

### <a name="featurization"></a>การทำให้เป็นคุณลักษณะ

เช่นเดียวกับรูปแบบการเลิกใช้บริการ เรากำลังเข้าร่วม ServiceCustomerID ของโรงแรมกับ CustomerID เพื่อสร้างคำแนะนำอย่างสม่ำเสมอต่อ CustomerID

![การทำให้เป็นคุณลักษณะของโมเดลคำแนะนำ](media/azure-machine-learning-model-featurization.png)

ข้อมูลมีที่มาจากสามเอนทิตีที่แตกต่างกัน และคุณลักษณะต่าง ๆ ได้มาจากเอนทิตีเหล่านั้น การทำให้เป็นคุณลักษณะสำหรับปัญหาของคำแนะนำนั้นแตกต่างกัน เมื่อเทียบกับสถานการณ์การเลิกใช้บริการหรือ CLTV รูปแบบคำแนะนำต้องการข้อมูลป้อนเข้าในรูปแบบของคุณลักษณะสามชุด

### <a name="model-selection"></a>การเลือกโมเดล

เราคาดการณ์ผลิตภัณฑ์หรือบริการโดยใช้อัลกอริทึมที่เรียกว่า **ฝึก Matchbox Recommender** เพื่อฝึกอบรมโมเดลคำแนะนำ

![คุณลักษณะคำแนะนำอัลกอริทึม](media/azure-machine-learning-model-recommendation-algorithm.png)

พอร์ตป้อนข้อมูลสามพอร์ตสำหรับโมเดล **ฝึก Matchbox Recommender** รับข้อมูลการใช้บริการฝึก คำอธิบายลูกค้า (ไม่บังคับ) และคำอธิบายบริการ มีสามวิธีในการให้คะแนนโมเดล แบบแรกคือสำหรับการประเมินโมเดลซึ่งมีการคำนวณคะแนน Normalized Discounted Cumulative Gain (NDCG) เพื่อจัดอันดับรายการที่ได้รับการจัดอันดับ ในการทดลองนี้เรามีคะแนน NDCG เท่ากับ 0.97 อีกสองตัวเลือกคือการให้คะแนนโมเดลในแค็ตตาล็อกบริการที่แนะนำทั้งหมด หรือให้คะแนนเฉพาะรายการที่ผู้ใช้ไม่เคยใช้มาก่อน

เมื่อพิจารณาเพิ่มเติมเกี่ยวกับการแจกจ่ายคำแนะนำในแคตตาล็อกบริการทั้งหมด เราสังเกตเห็นว่าโทรศัพท์ WiFi และบริการจัดส่งเป็นบริการอันดับต้น ๆ ที่ได้รับการแนะนำ สิ่งนี้สอดคล้องกับสิ่งที่เราพบจากการกระจายข้อมูลการใช้บริการ:

![ผลลัพธ์โมเดลคำแนะนำ](media/azure-machine-learning-model-output.png)

[การทดลองแนะนำผลิตภัณฑ์สามารถเข้าถึงได้ใน Azure AI Gallery](https://gallery.azure.ai/Experiment/Recommendation-4) ทั้งหมด

## <a name="integrate-custom-models"></a>รวมโมเดลที่กำหนดเอง

หากต้องการใช้การคาดคะเนเหล่านี้ใน Customer Insights คุณต้อง **ส่งออก** การคาดคะเนพร้อมกับรหัสลูกค้า [ส่งออกไปยังที่เก็บข้อมูล Azure Blob เดียวกัน](/azure/storage/common/storage-import-export-data-from-blobs) ที่คุณส่งออกข้อมูลต้นทาง สามารถกำหนดเวลาให้บริการเว็บทำนายผลเป็นประจำและอัปเดตคะแนนได้

ข้อมูลที่สร้างโดยโมเดลที่กำหนดเองสามารถใช้เพื่อเพิ่มข้อมูลลูกค้าของคุณ สำหรับข้อมูลเพิ่มเติม โปรดดู [โมเดล Machine Learning ที่กำหนดเอง](custom-models.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]