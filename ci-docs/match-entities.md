---
title: จับคู่เงื่อนไขสำหรับการรวมข้อมูล
description: จับคู่เอนทิตีเพื่อสร้างโปรไฟล์ลูกค้าแบบรวม
recommendations: false
ms.date: 10/07/2022
ms.subservice: audience-insights
ms.topic: tutorial
author: v-wendysmith
ms.author: mukeshpo
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-match
- ci-merge
- ci-map
- customerInsights
ms.openlocfilehash: bbd2c5f441b85460250c11f02358ea67260278d6
ms.sourcegitcommit: 52ea58c872b10f1e6f9d120be93df93cca1a12dd
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 10/26/2022
ms.locfileid: "9721544"
---
# <a name="match-conditions-for-data-unification"></a>จับคู่เงื่อนไขสำหรับการรวมข้อมูล

ขั้นตอนนี้ในการรวมจะกำหนดลำดับและกฎการจับคู่สำหรับการจับคู่ข้ามเอนทิตี ขั้นตอนนี้ต้องมีอย่างน้อยสองเอนทิตี

> [!NOTE]
> เมื่อคุณสร้างเงื่อนไขการแข่งขันและเลือก **ถัดไป** คุณจะไม่สามารถลบเอนทิตีหรือแอตทริบิวต์ที่เลือกได้ หากจำเป็น ให้เลือก **ย้อนกลับ** เพื่อตรวจสอบเอนทิตีและแอตทริบิวต์ที่เลือกก่อนดำเนินการต่อ

[!INCLUDE [m3-first-run-note](includes/m3-first-run-note.md)]

## <a name="include-enriched-entities-preview"></a>รวมเอนทิตีที่เพิ่มความสมบูรณ์แล้ว (พรีวิว)

หากคุณเพิ่มเอนทิตีในระดับแหล่งข้อมูลเพื่อในการช่วยปรับปรุงผลลัพธ์การรวมของคุณ ให้เลือกเอนทิตีเหล่านั้น สำหรับข้อมูลเพิ่มเติม โปรดดู [การเพิ่มความสมบูรณ์จากแหล่งข้อมูล](data-sources-enrichment.md) หากคุณเลือกเอนทิตีที่เพิ่มความสมบูรณ์แล้วบนหน้า **เรกคอร์ดซ้ำ** คุณก็ไม่จำเป็นต้องเลือกอีก

1. บนหน้า **เงื่อนไขการจับคู่** ให้เลือก **ใช้เอนทิตีที่เพิ่มความสมบูรณ์แล้ว** ที่ด้านบนของหน้า

1. จากบานหน้าต่าง **ใช้เอนทิตีที่เพิ่มข้อมูล** เลือกเอนทิตีที่เพิ่มข้อมูลอย่างน้อยหนึ่งรายการ

1. เลือก **สำเร็จ**

## <a name="specify-the-match-order"></a>ระบุลำดับการจับคู่

การจับคู่แต่ละรายการจะรวมสองเอนทิตีขึ้นไปให้เป็นเอนทิตีเดียวที่รวมเข้าด้วยกัน ขณะเดียวกัน ก็จะเก็บเรกคอร์ดลูกค้าที่ไม่ซ้ำกันด้วย ลำดับการจับคู่ระบุลำดับที่ระบบพยายามจับคู่เรกคอร์ด

> [!IMPORTANT]
> เอนทิตีแรกเรียกว่าเอนทิตีหลัก ทำหน้าที่เป็นพื้นฐานสำหรับโปรไฟล์แบบรวมของคุณ เอนทิตีเพิ่มเติมที่เลือกจะถูกเพิ่มในเอนทิตีนี้
>
> ข้อควรพิจารณาที่สำคัญ:
>
> - เลือกเอนทิตีที่มีข้อมูลโปรไฟล์ที่สมบูรณ์และน่าเชื่อถือที่สุดเกี่ยวกับลูกค้าของคุณเป็นเอนทิตีหลัก
> - เลือกเอนทิตีที่มีแอตทริบิวต์หลายรายการร่วมกับเอนทิตีอื่น (เช่น ชื่อ หมายเลขโทรศัพท์ หรือที่อยู่อีเมล) เป็นเอนทิตีหลัก

1. บนหน้า **เงื่อนไขการจับคู่** ใช้ลูกศรเลื่อนขึ้นและลงเพื่อย้ายเอนทิตีตามลำดับที่คุณต้องการ หรือลากและวาง ตัวอย่างเช่น เลือก **eCommerceCustomers** เป็นเอนทิตีหลักและ **loyCustomers** เป็นเอนทิตีรอง

1. เพื่อให้ทุกเรกคอร์ดในเอนทิตีเป็นลูกค้าที่ไม่ซ้ำกัน ไม่ว่าจะพบการจับคู่หรือไม่ก็ตาม ให้เลือก **รวมเรกคอร์ดทั้งหมด** เรกคอร์ดใดๆ ในเอนทิตีนี้ที่ไม่ตรงกับเรกคอร์ดในเอนทิตีอื่นๆ จะรวมอยู่ในโปรไฟล์แบบรวม เรกคอร์ดที่ไม่มีรายการที่ตรงกันเรียกว่าเรกคอร์ดเดี่ยว
  
เอนทิตีหลัก *Contacts:eCommerce* จะจับคู่กับเอนทิตีถัดไป *CustomerLoyalty:Loyalty*. ชุดข้อมูลที่มาจากขั้นตอนการจับคู่ครั้งแรกจะจับคู่กับเอนทิตีต่อไปนี้หากคุณมีเอนทิตีมากกว่าสองรายการ

:::image type="content" source="media/m3_match.png" alt-text="ภาพหน้าจอของลำดับการจับคู่ที่เลือกสำหรับเอนทิตี" lightbox="media/m3_match.png":::

## <a name="define-rules-for-match-pairs"></a>กำหนดกฎสำหรับคู่การจับคู่

กฎการจับคู่ระบุตรรกะที่คู่ของเอนทิตีที่ระบุจะถูกจับคู่ กฎประกอบด้วยเงื่อนไขตั้งแต่หนึ่งข้อขึ้นไป

คำเตือนถัดจากชื่อเอนทิตีหมายความว่าไม่มีการกำหนดกฎการจับคู่สำหรับคู่ที่ตรงกัน

1. เลือก **เพิ่มกฎ** สำหรับคู่เอนทิตีเพื่อกำหนดกฎการจับคู่

1. ในบานหน้าต่าง **เพิ่มกฎ** ให้กำหนดค่าเงื่อนไขสำหรับกฎ

   :::image type="content" source="media/m3_add_rule.png" alt-text="ภาพหน้าจอของบานหน้าต่างเพิ่มกฎ":::

   - **เลือกเอนทิตี/ฟิลด์ (แถวแรก)**: เลือกเอนทิตีและแอตทริบิวต์ที่มีแนวโน้มว่าจะไม่ซ้ำกับลูกค้า ตัวอย่างเช่น หมายเลขโทรศัพท์หรือที่อยู่อีเมล หลีกเลี่ยงการจับคู่ตามแอตทริบิวต์ชนิดกิจกรรม ตัวอย่างเช่น รหัสการซื้อมีแนวโน้มที่จะไม่พบการจับคู่ในชนิดของเรกคอร์ดอื่นๆ

   - **เลือกเอนทิตี/ฟิลด์ (แถวที่สอง)**: เลือกแอตทริบิวต์ที่เกี่ยวข้องกับแอตทริบิวต์ของเอนทิตีที่ระบุในแถวแรก

   - **นอร์มัลไลซ์**: เลือกจากตัวเลือกการนอร์มัลไลซ์ต่อไปนี้สำหรับแอตทริบิวต์ที่เลือก
     - **ตัวเลข**: แปลงระบบตัวเลขอื่นๆ เช่น เลขโรมัน เป็นเลขอารบิก *VIII* กลายเป็น *8*
     - **สัญลักษณ์**: ลบสัญลักษณ์และอักขระพิเศษทั้งหมด *Head&Shoulder* กลายเป็น *HeadShoulder*
     - **ข้อความเป็นตัวพิมพ์เล็ก**: แปลงอักขระทั้งหมดเป็นตัวพิมพ์เล็ก *ตัวพิมพ์ใหญ่และชื่อตัวพิมพ์ใหญ่ทั้งหมด* กลายเป็น *ตัวพิมพ์ใหญ่และชื่อตัวพิมพ์ใหญ่ทั้งหมด*
     - **ชนิด (โทรศัพท์ ชื่อ ที่อยู่ องค์กร)**: กำหนดชื่อ ตำแหน่ง หมายเลขโทรศัพท์ ที่อยู่ และองค์กรให้เป็นมาตรฐาน
     - **Unicode เป็น ASCII**: แปลงเครื่องหมาย Unicode เป็นอักขระ ASCII */u00B2* กลายเป็น *2*
     - **ช่องว่าง**: ลบช่องว่างทั้งหมด *Hello   World* กลายเป็น *HelloWorld*

   - **ความแม่นยำ**: ตั้งค่าระดับความแม่นยำที่จะใช้สำหรับเงื่อนไขนี้
     - **พื้นฐาน**: เลือกจาก *ต่ำ (30%)*, *ปานกลาง (60%)*, *สูง (80%)* และ *ตรงกันทุกประการ (100%)* เลือก **ตรงกันทุกประการ** เพื่อจับคู่เรกคอร์ดที่ตรงกัน 100 เปอร์เซ็นต์เท่านั้น
     - **กำหนดเอง**: กำหนดเปอร์เซ็นต์ที่เรกคอร์ดต้องตรงกัน ระบบจะจับคู่เรกคอร์ดที่ผ่านเกณฑ์นี้เท่านั้น

   - **ชื่อ**: ชื่อสำหรับกฎ

1. หากต้องการจับคู่เอนทิตีเฉพาะเมื่อแอตทริบิวต์ตรงตามเงื่อนไขหลายข้อ ให้เลือก **เพิ่ม** > **เพิ่มเงื่อนไข** เพื่อเพิ่มเงื่อนไขเพิ่มเติมให้กับกฎการจับคู่ เงื่อนไขเชื่อมต่อกับตัวดำเนินการเชิงตรรกะ และจะมีการดำเนินการก็ต่อเมื่อตรงตามเงื่อนไขทั้งหมดเท่านั้น

1. อีกทางหนึ่งคือ พิจารณาตัวเลือกขั้นสูงเช่น [ข้อยกเว้น](#add-exceptions-to-a-rule) หรือ [เงื่อนไขการจับคู่ที่กำหนดเอง](#specify-custom-match-conditions)

1. เลือก **เสร็จสิ้น** เพื่อดำเนินการกับกฎให้เสร็จสมบูรณ์

1. หรือ [เพิ่มกฎเพิ่มเติม](#add-rules-to-a-match-pair)

1. คลิก **ถัดไป**

> [!div class="nextstepaction"]
> [ขั้นตอนถัดไป: รวมฟิลด์](merge-entities.md)

### <a name="add-rules-to-a-match-pair"></a>เพิ่มกฎลงในคู่การจับคู่

กฎการจับคู่แสดงถึงชุดเงื่อนไข หากต้องการจับคู่เอนทิตีตามเงื่อนไขที่อิงตามแอตทริบิวต์หลายรายการ ให้เพิ่มกฎเพิ่มเติม

1. เลือก **เพิ่มกฎ** บนเอนทิตีที่คุณต้องการเพิ่มกฎ

1. ทำตามขั้นตอนใน [กำหนดกฎสำหรับคู่การจับคู่](#define-rules-for-match-pairs)

> [!NOTE]
> ลำดับของกฎมีความสำคัญ อัลกอริธึมการจับคู่จะพยายามจับคู่เรกคอร์ดลูกค้าที่กำหนด โดยพิจารณาจากกฎข้อแรกของคุณและดำเนินการต่อในกฎข้อที่สองก็ต่อเมื่อไม่มีการระบุรายการที่ตรงกันกับกฎข้อแรก

## <a name="advanced-options"></a>ตัวเลือกขั้นสูง

### <a name="add-exceptions-to-a-rule"></a>เพิ่มข้อยกเว้นให้กับกฎ

ในกรณีส่วนใหญ่ การจับคู่เอนทิตีจะนำไปสู่โปรไฟล์ลูกค้าที่ไม่ซ้ำกับข้อมูลที่รวมไว้ ในการแก้ไขกรณีที่ไม่ค่อยเกิดขึ้นบ่อยของผลลัพธ์ที่ผิดและผลลบผิด ให้กำหนดข้อยกเว้นสำหรับกฎการจับคู่ ข้อยกเว้นจะนำไปใช้หลังจากประมวลผลกฎการจับคู่และหลีกเลี่ยงการจับคู่เรกคอร์ดทั้งหมด ซึ่งเป็นไปตามเกณฑ์ข้อยกเว้น

ตัวอย่างเช่น หากกฎการจับคู่ของคุณรวมนามสกุล เมือง และวันเกิด ระบบจะระบุเป็นฝาแฝดที่มีนามสกุลเดียวกันซึ่งอาศัยอยู่ในเมืองเดียวกันกับที่มีโปรไฟล์เดียวกัน คุณสามารถระบุข้อยกเว้นที่ไม่ตรงกับโปรไฟล์ได้หากชื่อในเอนทิตีที่คุณรวมไม่เหมือนกัน

1. ในบานหน้าต่าง **แก้ไขกฎ** ให้เลือก **เพิ่ม** > **เพิ่มข้อยกเว้น**

1. ระบุเกณฑ์ข้อยกเว้น

1. เลือก **เสร็จสิ้น** เมื่อต้องการบันทึกกฎ

### <a name="specify-custom-match-conditions"></a>ระบุเงื่อนไขการจับคู่ที่กำหนดเอง

ระบุเงื่อนไขที่แทนที่ตรรกะการจับคู่เริ่มต้น ตัวเลือกที่สามารถใช้ได้มีสี่ประเภท:

|ตัวเลือก  |Description |ตัวอย่างเช่น  |
|---------|---------|---------|
|ตรงกันเสมอ     | กำหนดค่าสำหรับคีย์หลักที่ตรงกันเสมอ         |  จับคู่แถวที่มีคีย์หลัก *12345* กับแถวที่มีคีย์หลัก *54321* เสมอ       |
|ไม่ตรงกันเสมอ     | กำหนดค่าสำหรับคีย์หลักที่ไม่ตรงกัน        | ไม่จับคู่แถวที่มีคีย์หลัก *12345* กับแถวที่มีคีย์หลัก *54321*        |
|บายพาส            | กำหนดค่าที่ระบบควรละเว้นเสมอในวลีที่ตรงกัน |  ละเว้นค่า *11111* และ *ไม่รู้จัก* ระหว่างการจับคู่        |
|การแมปนามแฝง    | การกำหนดค่าที่ระบบควรพิจารณาว่าเป็นค่าเดียวกัน         | พิจารณา *Joe* เทียบเท่ากับ *Joseph*        |

1. เลือก **แบบกำหนดเอง**

   :::image type="content" source="media/m3_match_custom.png" alt-text="ปุ่มแบบกำหนดเอง":::

1. เลือก **ชนิดแบบกำหนดเอง** และเลือก **ดาวน์โหลดเทมเพลต** เปลี่ยนชื่อเทมเพลตโดยไม่เว้นวรรค ใช้เทมเพลตแยกต่างหากสำหรับตัวเลือกการจับคู่แต่ละรายการ

1. เปิดไฟล์เทมเพลตที่ดาวน์โหลดและกรอกรายละเอียด เทมเพลตจะมีฟิลด์เพื่อระบุเอนทิตีและค่าคีย์หลักของเอนทิตีที่จะใช้ในการจับคู่ที่กำหนดเอง ชื่อเอนทิตีตรงตามตัวพิมพ์ใหญ่-เล็ก ตัวอย่างเช่น หากคุณต้องการคีย์หลัก *12345* จากเอนทิตี *การขาย* จับคู่กับคีย์หลัก *34567* จากเอนทิตี *ผู้ติดต่อ* เสมอ ให้กรอกข้อมูลในเทมเพลต:
   - Entity1: การขาย
   - Entity1Key: 12345
   - Entity2: ผู้ติดต่อ
   - Entity2Key: 34567

   แฟ้มเทมเพลตเดียวกันสามารถระบุเรกคอร์ดที่ตรงกันแบบกำหนดเองได้จากหลายเอนทิตี

   > [!NOTE]
   > หากคุณต้องการระบุการจับคู่แบบกำหนดเองสำหรับการลบข้อมูลซ้ำซ้อนในเอนทิตี ให้ระบุเอนทิตีเดียวกันกับทั้ง เอนทิตี 1 และ เอนทิตี 2 และตั้งค่าคีย์หลักที่แตกต่างกัน คุณต้องกำหนดกฎการตรวจหารายการซ้ำอย่างน้อยหนึ่งกฎให้กับเอนทิตีเพื่อใช้การจับคู่แบบกำหนดเอง

1. หลังจากเพิ่มการแทนที่ทั้งหมดแล้ว ให้บันทึกไฟล์เทมเพลต

1. ไปที่ **ข้อมูล** > **แหล่งข้อมูล** และนำเข้าไฟล์เทมเพลตเป็นเอนทิตีใหม่

1. หลังจากอัปโหลดไฟล์แล้ว ให้เลือกตัวเลือก **กำหนดเอง** อีกครั้ง เลือกเอนทิตีที่จำเป็นจากเมนูดรอปดาวน์ และเลือก **เสร็จแล้ว**

   :::image type="content" source="media/custom-match-overrides.png" alt-text="ภาพหน้าจอของกล่องโต้ตอบเพื่อเลือกแทนที่สำหรับสถานการณ์การจับคู่ที่กำหนดเอง":::

1. การใช้การจับคู่ที่กำหนดเองจะขึ้นอยู่กับตัวเลือกการจับคู่ที่คุณต้องการใช้

   - สำหรับ **จับคู่เสมอ** หรือ **ไม่ต้องจับคู่** ให้ดำเนินการในขั้นตอนต่อไป
   - สำหรับ **บายพาส** หรือ **การแมปนามแฝง** ให้เลือก **แก้ไข** ในกฎการจับคู่ที่มีอยู่หรือสร้างกฎใหม่ ในรายการดรอปดาวน์การนอร์มัลไลซ์ ให้เลือกตัวเลือก **การบายพาสที่กำหนดเอง** หรือ **การแมปนามแฝง** และเลือก **เสร็จแล้ว**

1. เลือก **เสร็จสิ้น** บนบานหน้าต่าง **กำหนดเอง** เพื่อใช้การกำหนดค่าการจับคู่แบบกำหนดเอง

   ไฟล์เทมเพลตแต่ละไฟล์ที่นำเข้าคือแหล่งข้อมูลของตัวเอง หากพบเรกคอร์ดที่ต้องมีการดูแลเป็นพิเศษ ให้อัปเดตแหล่งข้อมูลที่เหมาะสม การอัปเดตจะใช้ระหว่างกระบวนการรวมครั้งต่อไป ตัวอย่างเช่น คุณระบุฝาแฝดที่มีชื่อเกือบเหมือนกันและอาศัยอยู่ในที่อยู่เดียวกันว่ามีการรวมเป็นคนเดียว อัปเดตแหล่งข้อมูลเพื่อระบุฝาแฝดเป็นเรกคอร์ดที่แยกจากกันและไม่ซ้ำกัน

> [!div class="nextstepaction"]
> [ขั้นตอนถัดไป: รวมฟิลด์](merge-entities.md)

[!INCLUDE [footer-include](includes/footer-banner.md)]
