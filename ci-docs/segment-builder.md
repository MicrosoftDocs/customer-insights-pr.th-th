---
title: สร้างเซ็กเมนต์ที่ซับซ้อนด้วยเครื่องมือสร้างเซ็กเมนต์
description: ใช้เครื่องมือสร้างเซ็กเมนต์เพื่อสร้างเซ็กเมนต์ที่ซับซ้อนของลูกค้าโดยการจัดกลุ่มตามคุณลักษณะต่างๆ
ms.date: 08/12/2022
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: v-wendysmith
manager: shellyha
searchScope:
- ci-segments
- ci-segment-builder
- ci-segment-details
- customerInsights
ms.openlocfilehash: 7f691fd0b2ea76a2960d5adf766a4b166f02ebb4
ms.sourcegitcommit: 267c317e10166146c9ac2c30560c479c9a005845
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 08/16/2022
ms.locfileid: "9304772"
---
# <a name="create-complex-segments-with-segment-builder"></a>สร้างเซ็กเมนต์ที่ซับซ้อนด้วยเครื่องมือสร้างเซ็กเมนต์

กำหนดตัวกรองที่ซับซ้อนสำหรับลูกค้าแบบรวมหรือผู้ติดต่อแบบรวมและเอนทิตีที่เกี่ยวข้อง แต่ละเซ็กเมนต์หลังจากการประมวลผลจะสร้างชุดเรกคอร์ดของลูกค้าหรือผู้ติดต่อที่คุณสามารถส่งออกและดำเนินการได้

> [!TIP]
> เซ็กเมนต์ที่ยึดตาม **ลูกค้าบุคคล** รวมข้อมูลผู้ติดต่อที่พร้อมใช้งานสำหรับสมาชิกเซ็กเมนต์โดยอัตโนมัติ ใน **บัญชีธุรกิจ** หากคุณ [รวม](data-unification.md) ทั้งบัญชีและผู้ติดต่อ ให้เลือกว่าเซ็กเมนต์จะอิงอยู่กับบัญชีหรือผู้ติดต่อของธุรกิจ ในการส่งออกไปยังปลายทางที่ต้องการข้อมูลการติดต่อ ให้ใช้เซ็กเมนต์ของผู้ติดต่อ ในการส่งออกไปยังปลายทางที่ต้องการข้อมูลบัญชี ให้ใช้เซ็กเมนต์ของบัญชี

## <a name="segment-builder"></a>เครื่องมือสร้างเซ็กเมนต์

รูปภาพต่อไปนี้แสดงแง่มุมต่างๆ ของเครื่องมือสร้างเซ็กเมนต์ ซึ่งจะแสดงเซ็กเมนต์ที่ส่งผลต่อกลุ่มลูกค้า ลูกค้าที่สั่งซื้อสินค้าในกรอบเวลาเฉพาะ และสะสมคะแนนสะสม หรือใช้เงินจำนวนหนึ่ง

:::image type="content" source="media/segment-builder-overview.png" alt-text="องค์ประกอบของตัวสร้างเซ็กเมนต์" lightbox="media/segment-builder-overview.png":::

1. จัดระเบียบเซ็กเมนต์ของคุณด้วยกฎและกฎย่อย กฎหรือกฎย่อยแต่ละรายการประกอบด้วยเงื่อนไข รวมเงื่อนไขกับตัวดำเนินการเชิงตรรกะ

1. เลือก [พาธความสัมพันธ์](relationships.md) ระหว่างงเอนทิตีที่ใช้กับกฎ พาธความสัมพันธ์กำหนดแอตทริบิวต์ที่สามารถใช้ได้ในเงื่อนไข

1. จัดการกฎและกฎย่อย เปลี่ยนตำแหน่งของกฎ หรือลบออก

1. เพิ่มเงื่อนไขและสร้างระดับของการซ้อนที่เหมาะสมโดยใช้กฎย่อย

1. ใช้การดำเนินการตั้งค่ากับกฎที่เชื่อมต่อ

1. ใช้บานหน้าต่างแอตทริบิวต์เพื่อเพิ่มแอตทริบิวต์ของเอนทิตีที่พร้อมใช้งาน หรือสร้างเงื่อนไขตามแอตทริบิวต์ บานหน้าต่างแสดงรายการของเอนทิตีและแอตทริบิวต์ ตามพาธความสัมพันธ์ที่เลือก ซึ่งพร้อมใช้งานสำหรับกฎที่เลือก

1. เพิ่มเงื่อนไขตามแอตทริบิวต์ไปยังกฎและกฎย่อยที่มีอยู่ หรือเพิ่มลงในกฎใหม่

1. เลิกทำและทำซ้ำการเปลี่ยนแปลง ในขณะที่สร้างเซ็กเมนต์

ตัวอย่างข้างต้นแสดงให้เห็นถึงความสามารถในการแบ่งเซ็กเมนต์ เราได้กำหนดเซ็กเมนต์สำหรับลูกค้าที่ซื้อสินค้าทางออนไลน์อย่างน้อย $500 *และ* มีความสนใจในการพัฒนาซอฟต์แวร์

## <a name="create-a-new-segment-with-segment-builder"></a>สร้างเซ็กเมนต์ใหม่ด้วยเครื่องมือสร้างเซ็กเมนต์

1. ไปที่ **เซ็กเมนต์**

1. เลือก **ใหม่** > **สร้างของคุณเอง** ในหน้าตัวสร้างเซ็กเมนต์ คุณกำหนดหรือเขียนกฎ กฎประกอบด้วยเงื่อนไขตั้งแต่หนึ่งเงื่อนไขขึ้นไปที่กำหนดชุดของลูกค้า

   > [!NOTE]
   > สำหรับสภาพแวดล้อมตามบัญชีธุรกิจ ให้เลือก **ใหม่** > **เซ็กเมนต์ของบัญชี** หรือ **เซ็กเมนต์ของผู้ติดต่อ (พรีวิว)** ตามชนิดของเซ็กเมนต์ที่คุณต้องการสร้าง ถ้ามีการกำหนด [ลำดับชั้นบัญชี](relationships.md#set-up-account-hierarchies) และคุณต้องการสร้างกฎเพื่อกรองข้อมูลตามความสัมพันธ์หลักและรอง ให้เลือก **ใช้ลำดับชั้นหรือไม่ (พรีวิว)** ให้เลือกลำดับชั้น แล้วเลือก **นำไปใช้**
   >
   > :::image type="content" source="media/segment_acct_hierarchy.png" alt-text="เซ็กเมนต์ บานหน้าต่างเลือกลำดับชั้นบัญชี":::

1. เลือก **แก้ไขรายละเอียด** ถัดจากเซ็กเมนต์ที่ไม่มีชื่อ ระบุชื่อสำหรับเซ็กเมนต์ของคุณ และปรับปรุง **ชื่อเอนทิตีผลลัพธ์** ที่แนะนำสำหรับเซ็กเมนต์ หรือเพิ่มคำอธิบายและ [แท็ก](work-with-tags-columns.md#manage-tags) ไปยังเซ็กเมนต์

   :::image type="content" source="media/segments_edit_details.png" alt-text="กล่องโต้ตอบแก้ไขรายละเอียด":::

1. ในส่วน **Rule1** ให้เลือกแอตทริบิวต์ของเอนทิตีที่คุณต้องการใช้กรองลูกค้า การเลือกแอตทริบิวต์มีสองวิธี:
   - ตรวจสอบรายการของเอนทิตีและแอตทริบิวต์ที่มีอยู่ในบานหน้าต่าง **เพิ่มในกฎ** และเลือกไอคอน **+** ที่อยู่ถัดจากแอตทริบิวต์ที่จะเพิ่ม เลือกว่าคุณต้องการเพิ่มแอตทริบิวต์ให้กับกฎที่มีอยู่หรือใช้เพื่อสร้างกฎใหม่
   - พิมพ์ชื่อของแอตทริบิวต์ในส่วนกฎเพื่อดูรายการแนะนำที่ตรงกัน

1. เลือกตัวดำเนินการเพื่อระบุค่าที่ตรงกันของเงื่อนไข แอตทริบิวต์สามารถมีชนิดข้อมูลหนึ่งในสี่ชนิดเป็นค่า: ตัวเลข สตริง วันที่ หรือแบบบูลีน ตัวดำเนินการต่างๆ สามารถระบุเงื่อนไขได้ ขึ้นอยู่กับชนิดข้อมูลของแอตทริบิวต์

1. เลือก **เพิ่มเงื่อนไข** เพื่อเพิ่มเงื่อนไขเพิ่มเติมให้กับกฎ ในการสร้างกฎภายใต้กฎปัจจุบัน ให้เลือก **เพิ่มกฎย่อย**

1. หากกฎใช้เอนทิตีอื่นที่ไม่ใช่เอนทิตี *ลูกค้า* (หรือเอนทิตี *ContactProfile* สำหรับ B-to-B) ให้เลือก **ตั้งค่าเส้นทางความสัมพันธ์** เพื่อแมปเอนทิตีที่เลือกกับเอนทิตีลูกค้าแบบรวม หากมีเส้นทางความสัมพันธ์ที่เป็นไปได้เพียงเส้นทางเดียว ระบบจะเลือกเส้นทางนั้นโดยอัตโนมัติ [เส้นทางความสัมพันธ์](relationships.md#relationship-paths) ที่แตกต่างกันสามารถให้ผลลัพธ์ที่แตกต่างกัน กฎทุกข้อสามารถมีเส้นทางความสัมพันธ์ของตัวเองได้

   :::image type="content" source="media/relationship-path.png" alt-text="เส้นทางความสัมพันธ์ที่เป็นไปได้เมื่อสร้างกฎโดยยึดตามเอนทิตีที่แมปกับเอนทิตีลูกค้าแบบรวม":::

1. หากคุณมีหลายเงื่อนไขในกฎ ให้เลือกตัวดำเนินการเชิงตรรกะที่เชื่อมต่อได้  
   - ตัวดำเนินการ **AND** ต้องเป็นไปตามเงื่อนไขทั้งหมดเพื่อรวมเรกคอร์ดในเซ็กเมนต์ ใช้ตัวเลือกนี้เมื่อคุณกำหนดเงื่อนไขในเอนทิตีต่างๆ ที่แตกต่างกัน
   - ตัวดำเนินการ **OR** ต้องเป็นไปตามเงื่อนไขอย่างใดอย่างหนึ่งเพื่อรวมเรกคอร์ดในเซ็กเมนต์ ใช้ตัวเลือกนี้เมื่อคุณกำหนดหลายเงื่อนไขสำหรับเอนทิตีเดียวกัน

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="การที่มีเงื่อนไข AND สองเงื่อนไข":::

   เมื่อใช้ตัวดำเนินการ OR เงื่อนไขทั้งหมดต้องเป็นไปตามเอนทิตีที่รวมอยู่ในเส้นทางความสัมพันธ์

1. หากต้องการสร้างชุดเรกคอร์ดลูกค้าที่แตกต่างกัน ให้สร้างกฎหลายรายการ หากต้องการรวมลูกค้าที่จำเป็นสำหรับกรณีธุรกิจของคุณ ให้รวมกลุ่มเข้าด้วยกัน โดยเฉพาะอย่างยิ่ง หากคุณไม่สามารถรวมเอนทิตีในกฎได้เนื่องจากเส้นทางความสัมพันธ์ที่ระบุ ให้สร้างกฎใหม่เพื่อเลือกแอตทริบิวต์ที่สร้างกฎนั้น

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="เพิ่มกฎใหม่ในเซ็กเมนต์และเลือกตัวดำเนินการที่กำหนด":::

   1. เลือก **เพิ่มกฎ**
   1. เลือกหนึ่งในตัวดำเนินการตั้งค่า: **ยูเนียน**, **อินเตอร์เซก** หรือ **ยกเว้น**

      - **ยูเนียน** รวมทั้งสองกลุ่มเข้าด้วยกัน
      - **อินเตอร์เซค** ทับซ้อนทั้งสองกลุ่ม เฉพาะข้อมูลที่มี *ร่วมกัน* ของทั้งสองกลุ่มเท่านั้นที่ยังคงอยู่ในกลุ่มแบบรวม
      - **ยกเว้น** รวมสองกลุ่ม เฉพาะข้อมูลในกลุ่ม A ที่มี *ร่วมกัน* กับข้อมูลในกลุ่ม B เท่านั้นที่จะถูกเก็บไว้

1. ตามค่าเริ่มต้น เอนทิตีผลลัพธ์จะมีแอตทริบิวต์ทั้งหมดของโปรไฟล์ลูกค้าที่ตรงกับตัวกรองที่กำหนด ใน B-to-B เมื่อใช้เอนทิตี *ContactProfile* รหัสบัญชีจะถูกรวมโดยอัตโนมัติ หากเซ็กเมนต์อิงตามเอนทิตีอื่นที่ไม่ใช่เอนทิตี *ลูกค้า* หรือรวมแอตทริบิวต์เพิ่มเติมจาก *ContactProfile* ให้เลือก **แอตทริบิวต์โครงการ** เพื่อเพิ่มแอตทริบิวต์เพิ่มเติมจากเอนทิตีเหล่านี้ไปยังเอนทิตีเอาต์พุต
 
   ตัวอย่างเช่น: เซ็กเมนต์ขึ้นอยู่กับเอนทิตีที่มีข้อมูลการซื้อ ซึ่งเกี่ยวข้องกับเอนทิตี *ลูกค้า* เซ็กเมนต์นี้ค้นหาลูกค้าทั้งหมดจากสเปนที่ซื้อสินค้าในปีปัจจุบัน คุณสามารถเลือกผนวกแอตทริบิวต์ เช่น ราคาของสินค้า หรือวันที่ซื้อกับเรกคอร์ดลูกค้าที่ตรงกันทั้งหมดในเอนทิตีผลลัพธ์ ข้อมูลนี้อาจเป็นประโยชน์ในการวิเคราะห์ความสัมพันธ์ตามฤดูกาลกับการใช้จ่ายทั้งหมด

   :::image type="content" source="media/segments-project-attributes.png" alt-text="ตัวอย่างแอตทริบิวต์ที่คาดการณ์ที่เลือกในบานหน้าต่างด้านข้างที่จะเพิ่มไปยังเอนทิตีผลลัพธ์":::
 
   ผลลัพธ์ตัวอย่างสำหรับเซ็กเมนต์ตามบัญชีธุรกิจที่มีแอตทริบิวต์ที่คาดการณ์ไว้ของผู้ติดต่ออาจมีลักษณะดังนี้:

   |ID  |ชื่อบัญชี  |รายได้  |ชื่อผู้ติดต่อ  | บทบาทผู้ติดต่อ|
   |---------|---------|---------|---------|---|
   |10021     | Contoso | 100K | [Abbie Moss, Ruth Soto]  | [CEO, ผู้จัดการฝ่ายจัดซื้อจัดจ้าง]

   > [!NOTE]
   > - **แอตทริบิวต์โครงการ** ใช้ได้เฉพาะกับเอนทิตีที่มีความสัมพันธ์แบบหนึ่งต่อกลุ่มกับเอนทิตี *ลูกค้า* หรือ *ContactProfile* ตัวอย่างเช่น ลูกค้ารายหนึ่งสามารถมีการสมัครใช้งานหลายรายการ
   > - หากแอตทริบิวต์ที่คุณต้องการคาดการณ์ห่างไปมากกว่าหนึ่งฮอปจากเอนทิตี *ลูกค้า* หรือ *ContactProfile* ตามที่กำหนดโดยความสัมพันธ์ แอตทริบิวต์นั้นควรถูกใช้ในทุกกฎของการสอบถามเซ็กเมนต์ที่คุณกำลังสร้าง
   > - หากแอตทริบิวต์ที่คุณต้องการคาดการณ์ห่างเพียงหนึ่งฮอปจากเอนทิตี *ลูกค้า* หรือ *ContactProfile* แอตทริบิวต์นั้นไม่จำเป็นต้องแสดงในทุกกฎของการสอบถามเซ็กเมนต์ที่คุณกำลังสร้าง
   > - **แอตทริบิวต์ที่คาดการณ์ไว้** จะถูกนำมาพิจารณา เมื่อใช้ตัวดำเนินการตั้งค่า

1. เลือก **เรียกใช้** เพื่อสร้างเซ็กเมนต์ เลือก **บันทึก** หากคุณต้องการเก็บการกำหนดค่าปัจจุบันไว้ และเรียกใช้เซ็กเมนต์ในภายหลัง หน้า **เซ็กเมนต์** จะปรากฏขึ้น

### <a name="segment-builder-tips"></a>เคล็ดลับของเครื่องมือสร้างเซ็กเมนต์

เมื่อสร้างเซ็กเมนต์โดยใช้เครื่องมือสร้างเซ็กเมนต์ ให้คำนึงถึงเคล็ดลับต่อไปนี้:

- เครื่องมือสร้างเซ็กเมนต์จะไม่แนะนำค่าที่ถูกต้องจากเอนทิตีเมื่อตั้งค่าตัวดำเนินการสำหรับเงื่อนไข คุณสามารถไปที่ **ข้อมูล** > **เอนทิตี** และดาวน์โหลดข้อมูลเอนทิตีเพื่อดูว่ามีค่าใดบ้าง
- เงื่อนไขที่อิงตามวันที่ช่วยให้คุณสลับระหว่างวันที่ตายตัวและช่วงวันที่แบบลอยตัวได้
- หากคุณมีกฎหลายข้อสำหรับเซ็กเมนต์ของคุณ กฎที่คุณกำลังแก้ไขจะมีเส้นแนวตั้งสีน้ำเงินอยู่ข้างๆ
- คุณสามารถย้ายกฎและเงื่อนไขไปยังตำแหน่งอื่นในข้อกำหนดเซ็กเมนต์ได้ เลือกจุดไข่ปลาแนวตั้ง (&vellip;) ถัดจากกฎหรือเงื่อนไข แล้วเลือกวิธีและตำแหน่งที่จะย้าย
- ตัวควบคุม **เลิกทำ** และ **ทำซ้ำ** ในแถบคำสั่ง ช่วยให้คุณสามารถย้อนกลับการเปลี่ยนแปลงได้
- หลังจากสร้างเซ็กเมนต์ บางเซ็กเมนต์อนุญาตให้คุณ [ติดตามการใช้งานของเซ็กเมนต์](segments.md#track-usage-of-a-segment)

## <a name="next-steps"></a>ขั้นตอนถัดไป

[ส่งออกเซ็กเมนต์](export-destinations.md) และสำรวจ [การรวมการ์ดลูกค้า](customer-card-add-in.md) เพื่อใช้เซ็กเมนต์ในแอปพลิเคชันอื่น

[!INCLUDE [footer-include](includes/footer-banner.md)]
